.\" Generated by scdoc 1.11.3
.\" Complete documentation for this program is not available as a GNU info page
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.nh
.ad l
.\" Begin generated content:
.TH "proxy-ns" "1" "2025-09-03"
.PP
.SH NAME
.PP
proxy-ns - Force any program to use your SOCKS5 proxy server
.PP
.SH SYNOPSIS
.PP
\fBproxy-ns\fR [\fIOPTIONS\fR] <\fIcommand\fR> [\fICOMMAND OPTIONS\fR]
.PP
.SH OPTIONS
.PP
.SS General options
.PP
\fB-c\fR
.RS 4
Path to configuration file, see \fBproxy-ns\fR(5) for details.\&
.PP
.RE
\fB-q\fR
.RS 4
Quiet mode.\&
.PP
.RE
\fB-h\fR, \fB--help\fR
.RS 4
Show help message.\&
.PP
.RE
.SS Overriding options
These options override settings in the configuration file:
.PP
\fB--tun-name\fR=\fITUN_NAME\fR
.RS 4
Set TUN device name.\&
.PP
.RE
\fB--tun-ip\fR=\fITUN_IP\fR
.RS 4
Set TUN device IPv4 address.\&
.PP
.RE
\fB--tun-ip6\fR=\fITUN_IP6\fR
.RS 4
Set TUN device IPv6 address.\&
.PP
.RE
\fB--socks5-address\fR=\fISOCKS5_ADDRESS\fR
.RS 4
Set the SOCKS5 server to use.\&
.PP
.RE
\fB--username\fR=\fIUSERNAME\fR
.RS 4
Set the username of the specified SOCKS5 server.\&
.PP
.RE
\fB--password\fR=\fIPASSWORD\fR
.RS 4
Set the password of the specified SOCKS5 server.\&
.PP
.RE
\fB--fake-dns\fR=\fIBOOL\fR
.RS 4
Enable or disable fake DNS.\&
.PP
.RE
\fB--fake-network\fR=\fIFAKE_NETWORK\fR
.RS 4
Set the network used for fake DNS.\&
.PP
.RE
\fB--dns-server\fR=\fIDNS_SERVER\fR
.RS 4
Set DNS server.\&
.PP
.RE
\fB--udp-session-timeout\fR=\fIUDP_SESSION_TIMEOUT\fR
.RS 4
Set UDP session timeout.\&
.PP
.RE
.SH NOTES ON CAPABILITIES
.PD 0
.IP \(bu 4
\fBcap_sys_admin\fR is for \fBsetns\fR system call.\&
.PD
.PP
.PD 0
.IP \(bu 4
\fBcap_net_admin\fR is for creating TUN device.\&
.PD
.PP
.PD 0
.IP \(bu 4
\fBcap_net_bind_service\fR is for the FakeDNS server listening on \fB127.\&0.\&0.\&1:53\fR.\&
.PD
.PP
.PD 0
.IP \(bu 4
\fBcap_sys_chroot\fR is for \fBsetns\fR into a new mount namespace.\&
.PD
.PP
.PD 0
.IP \(bu 4
\fBcap_chown\fR is for \fBchown 0:0 /etc/resolv.\&conf\fR.\&
.PD
.PP
All capabilities are dropped permanently before the program'\&s main loop.\&
.PP
.SH NOTES ON FAKEDNS
FakeDNS can be used to avoid a separate DNS roundtrip, thus improving
latency.\& But it has its own limitations:
.PP
.PD 0
.IP \(bu 4
All domains are resolved to \fBfake_network\fR, some programs may not
work as expected(e.\&g.\& \fBdig\fR, \fBgeoiplookup\fR).\&
.PD
.PP
.PD 0
.IP \(bu 4
Some programs may not use your system DNS resolver.\& FakeDNS won'\&t
work for them.\&
.PD
.PP
.PD 0
.IP \(bu 4
Many SOCKS5 servers doesn'\&t support \fBAtypDomainName\fR for UDP ASSOCIATE.\&
If you enable FakeDNS, all UDP packets to domains will be dropped.\&
(e.\&g.\& DNS may still work, but QUIC probably won'\&t.\&)
.PD
.PP
.SH NOTES ON FORKING PROGRAMS
proxy-ns daemon program exits as the command exits, so if you start a forking program in proxy-ns, it will lose network connection.\&
.PP
If you start the forking program in shell, you can work around this problem by executing the shell in proxy-ns beforehand:
.PP
.RS 4
\fBexec proxy-ns $SHELL\fR
.PP
.RE
.SH SEE ALSO
.PP
\fBproxy-ns(5)\fR
