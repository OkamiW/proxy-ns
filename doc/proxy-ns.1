.\" Generated by scdoc 1.11.3
.\" Complete documentation for this program is not available as a GNU info page
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.nh
.ad l
.\" Begin generated content:
.TH "proxy-ns" "1" "2025-09-06"
.PP
.SH NAME
.PP
proxy-ns - Force any program to use your SOCKS5 proxy server
.PP
.SH SYNOPSIS
.PP
\fBproxy-ns\fR [\fIOPTIONS\fR] <\fIcommand\fR> [\fICOMMAND OPTIONS\fR]
.PP
.SH OPTIONS
.PP
.SS General options
.PP
\fB-c\fR
.RS 4
Path to configuration file, see \fBproxy-ns\fR(5) for details.\&
.PP
.RE
\fB-q\fR
.RS 4
Quiet mode.\& By default, proxy-ns prints errors to standard error, this option makes proxy-ns redirects standard error to /dev/null at startup.\&
.PP
.RE
\fB-h\fR, \fB--help\fR
.RS 4
Show help message.\&
.PP
.RE
.SS Overriding options
These options override settings in the configuration file:
.PP
\fB--tun-name\fR=\fITUN_NAME\fR
.RS 4
Set TUN device name.\&
.PP
.RE
\fB--tun-ip\fR=\fITUN_IP\fR
.RS 4
Set TUN device IPv4 address.\&
.PP
.RE
\fB--tun-ip6\fR=\fITUN_IP6\fR
.RS 4
Set TUN device IPv6 address.\&
.PP
Setting this option enables IPv6 default route in proxy-ns network namespace.\&
Only set this option if your SOCKS5 server has IPv6 connectivity.\&
.PP
.RE
\fB--socks5-address\fR=\fISOCKS5_ADDRESS\fR
.RS 4
Set the SOCKS5 server to use.\&
.PP
.RE
\fB--username\fR=\fIUSERNAME\fR
.RS 4
Set the username of the specified SOCKS5 server.\&
.PP
.RE
\fB--password\fR=\fIPASSWORD\fR
.RS 4
Set the password of the specified SOCKS5 server.\&
.PP
.RE
\fB--fake-dns\fR=\fIBOOL\fR
.RS 4
Enable or disable fake DNS.\& See \fBNOTES ON FAKEDNS\fR for more details.\&
.PP
.RE
\fB--fake-network\fR=\fIFAKE_NETWORK\fR
.RS 4
Set the network used for fake DNS.\&
.PP
If \fBfake-dns\fR is enabled, and programs in proxy-ns network namespace makes a DNS request, an IP address from \fBfake-network\fR will be returned as response.\& The relationship between the domain name in request and the IP address returned will be saved, further accesses to the IP address will be recognized as accesses to the saved DNS name.\&
.PP
.RE
\fB--dns-server\fR=\fIDNS_SERVER\fR
.RS 4
Set DNS server.\&
.PP
DNS server used to resolve domain names.\& When \fBfake-dns\fR is enabled, it'\&s only used for DNS requests \fBfake-dns\fR cannot handle: DNS message types other than A and AAAA.\&
.PP
.RE
\fB--udp-session-timeout\fR=\fIUDP_SESSION_TIMEOUT\fR
.RS 4
Set UDP session timeout.\&
.PP
.RE
.SH NOTES ON CAPABILITIES
.PD 0
.IP \(bu 4
\fBcap_sys_admin\fR is for \fBsetns\fR system call.\&
.PD
.PP
.PD 0
.IP \(bu 4
\fBcap_net_admin\fR is for creating TUN device.\&
.PD
.PP
.PD 0
.IP \(bu 4
\fBcap_net_bind_service\fR is for the FakeDNS server listening on \fB127.\&0.\&0.\&1:53\fR.\&
.PD
.PP
.PD 0
.IP \(bu 4
\fBcap_sys_chroot\fR is for \fBsetns\fR into a new mount namespace.\&
.PD
.PP
.PD 0
.IP \(bu 4
\fBcap_chown\fR is for \fBchown 0:0 /etc/resolv.\&conf\fR.\&
.PD
.PP
All capabilities are dropped permanently before the program'\&s main loop.\&
.PP
.SH NOTES ON FAKEDNS
Advantages of FakeDNS:
.PD 0
.IP \(bu 4
Avoid an extra roundtrip for DNS.\&
.PD
.PP
.PD 0
.IP \(bu 4
Resolve DNS even when SOCKS5 server doesn'\&t support UDP ASSOCIATE.\&
.PD
.PP
Disadvantages of FakeDNS:
.PD 0
.IP \(bu 4
All domain names are resolved to \fBfake_network\fR, some programs may not
work as expected(e.\&g.\& \fBdig\fR, \fBgeoiplookup\fR).\&
.PD
.PP
.PD 0
.IP \(bu 4
Many SOCKS5 servers doesn'\&t support \fBAtypDomainName\fR for UDP ASSOCIATE.\&
If you enable FakeDNS, all UDP packets to domain names will be dropped.\&
(e.\&g.\& DNS may still work, but QUIC probably won'\&t.\&)
.PD
.PP
Caveats:
.PD 0
.IP \(bu 4
Some programs may not use your system DNS resolver.\& FakeDNS won'\&t
work for them.\&
.PD
.PP
.SH NOTES ON FORKING PROGRAMS
proxy-ns daemon program exits as the command exits, so if you start a forking program in proxy-ns, it will lose network connection.\&
.PP
If you start the forking program in shell, you can work around this problem by executing the shell in proxy-ns beforehand:
.PP
.RS 4
\fBexec proxy-ns $SHELL\fR
.PP
.RE
.SH SEE ALSO
.PP
\fBproxy-ns(5)\fR
